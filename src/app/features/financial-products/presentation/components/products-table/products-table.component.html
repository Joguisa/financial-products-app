<div class="table-responsive">
    <table class="main-table">
        <thead>
            <tr>
                <th>Logo</th>
                <th>Nombre del producto</th>
                <th>Descripción</th>
                <th>Fecha de liberación</th>
                <th>Fecha de reestructuración</th>
                <th><span class="sr-only">Acciones</span></th>
            </tr>
        </thead>
        <tbody>
            @for (product of products(); track product.id) {
            <tr>
                <td>
                    <img [src]="product.logo" [alt]="product.name" class="product-logo" loading="lazy" width="40"
                        height="40" (error)="onImageError($event)">
                </td>
                <td>{{ product.name }}</td>
                <td>{{ product.description }}</td>
                <td>{{ product.date_release | date:'dd/MM/yyyy' }}</td>
                <td>{{ product.date_revision | date:'dd/MM/yyyy' }}</td>
                <td class="actions-cell">
                    <div class="dropdown">
                        <button class="btn-icon" (click)="toggleMenu(product.id)"
                            [attr.aria-label]="'Abrir menú de opciones para ' + product.name" aria-haspopup="true"
                            [attr.aria-expanded]="openMenuId() === product.id">
                            ⋮
                        </button>
                        @if (openMenuId() === product.id) {
                        <div class="dropdown-menu" role="menu">
                            <button class="dropdown-item" role="menuitem" (click)="onEdit(product)">Editar</button>
                            <button class="dropdown-item dropdown-item--danger" role="menuitem"
                                (click)="onDelete(product)">Eliminar</button>
                        </div>
                        }
                    </div>
                </td>
            </tr>
            } @empty {
            <tr class="empty-row">
                <td colspan="6">No se encontraron productos</td>
            </tr>
            }
        </tbody>
    </table>
</div>