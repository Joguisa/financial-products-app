<div class="table-responsive">
    <table class="main-table">
        <thead>
            <tr>
                <th>Logo</th>
                <th>Nombre del producto</th>
                <th>Descripción</th>
                <th>Fecha de liberación</th>
                <th>Fecha de reestructuración</th>
                <th></th>
            </tr>
        </thead>
        <tbody>
            @for (product of products(); track product.id) {
            <tr>
                <td>
                    <!-- <img [src]="product.logo" [alt]="product.name" class="product-logo"
                        onerror="this.onerror=null; this.src='assets/icons/default-logo.svg'"> -->
                    <img [src]="product.logo" [alt]="product.name" class="product-logo"
                        (error)="onImageError($event)" />
                </td>
                <td>{{ product.name }}</td>
                <td>{{ product.description }}</td>
                <td>{{ product.date_release | date:'dd/MM/yyyy' }}</td>
                <td>{{ product.date_revision | date:'dd/MM/yyyy' }}</td>
                <td class="actions-cell">
                    <div class="dropdown">
                        <button class="btn-icon" (click)="toggleMenu(product.id)" aria-label="Opciones">
                            ⋮
                        </button>
                        @if (openMenuId() === product.id) {
                        <div class="dropdown-menu">
                            <button class="dropdown-item" (click)="onEdit(product)">Editar</button>
                            <button class="dropdown-item dropdown-item--danger"
                                (click)="onDelete(product)">Eliminar</button>
                        </div>
                        }
                    </div>
                </td>
            </tr>
            } @empty {
            <tr class="empty-row">
                <td colspan="6">No se encontraron productos</td>
            </tr>
            }
        </tbody>
    </table>
</div>